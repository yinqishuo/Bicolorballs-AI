<div align="center">
<h1> Bicolorballs-AI  ğŸ°</h1>
<p>  ğŸ±åŸºäºæ·±åº¦å­¦ä¹ æ¨¡å‹æ¨ç†ä¸‹ä¸€æ¬¡çš„åŒè‰²çƒå·ç ğŸ± </p>
<img src="https://camo.githubusercontent.com/82291b0fe831bfc6781e07fc5090cbd0a8b912bb8b8d4fec0696c881834f81ac/68747470733a2f2f70726f626f742e6d656469612f394575424971676170492e676966" width="800"  height="3">
</div><div align="left"></div>

çˆ¬è™«çˆ¬å–æœ€è¿‘150æ¬¡çš„åŒè‰²çƒä¸­å¥–ç»“æœï¼Œä½¿ç”¨è®­ç»ƒå¥½çš„æ·±åº¦å­¦ä¹ æ¨¡å‹æ¨ç†ä¸‹ä¸€æ¬¡çš„ä¸­å¥–å·ç 

## å¼€å‘ç¯å¢ƒ

**python3.9ã€tensorflow2.10ã€keras2.10ã€jupter Lab**
## ç»“æœé¢„è§ˆ
ä½¿ç”¨å†å²æ•°æ®æ¨¡æ‹Ÿçš„10æ¬¡ä¸‹æ³¨ï¼Œæ¯æ¬¡10å…ƒï¼Œä¸­6ç­‰å¥–7æ¬¡ï¼Œ5ç­‰å¥–1æ¬¡ã€‚
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 1 0 0 0 1 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º11    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 1 0 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 1 1 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 1 0 0 1 1 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 1 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º11    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 0 0 0 0 1 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0]
è“çƒå¼€å¥–ç»“æœï¼š [1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º13    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º7    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 1 1 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º16    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
```

```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 1 0 0 0 0 0 1]
è“çƒå¼€å¥–ç»“æœï¼š [1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º16    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º13    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     æ­å–œä½ ï¼Œä½ ä¸­äº”ç­‰å¥–äº†ï¼ï¼10å—é’±
```

## å¼•è¨€

äº‹æƒ…çš„èµ·å› æ˜¯çˆ¶äº²è¢«äº²æˆšå®‰åˆ©ï¼Œçªç„¶å–œæ¬¢ä¸Šäº†åŒè‰²çƒï¼Œè¿è§„åˆ™å’Œå¼€å¥–ç»“æœæ€ä¹ˆçœ‹éƒ½ä¸æ‡‚çš„ä»–ï¼Œè®©æˆ‘ç ”ç©¶ç ”ç©¶è¿™ä¸ªäº‹ï¼Œç»™ä»–é€‰ä¸ªå·ã€‚ä»–è¿˜è¯´è€å®¶æœ‰å¥½å‡ ä¸ªäººä¸­äº†å‡ ç™¾ä¸‡ï¼Œä¹°ä¸ªè½¦ä¹°äº†æˆ¿ï¼Œæˆ‘.......ï¼Œè°èƒ½æ‹’ç»ä¸€ä¸ª2å—é’±å°±èƒ½ä¹°åˆ°çš„ç™¾ä¸‡å¥–é‡‘çš„æ¢¦æƒ³å‘¢ï¼Ÿ---------------------20231204

## ä¸€ã€åŒè‰²çƒè§„åˆ™

![R.75407fbe8031231449f4c3a4e7adc38d](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/R.75407fbe8031231449f4c3a4e7adc38d.png)

1.  åŒè‰²çƒç”±çº¢è‰²çƒå’Œè“è‰²çƒç»„æˆã€‚çº¢è‰²çƒå…±æœ‰33ä¸ªå·ç ï¼ˆ01-33ï¼‰ï¼Œè“è‰²çƒå…±æœ‰16ä¸ªå·ç ï¼ˆ01-16ï¼‰ã€‚
2. åœ¨æ¯æœŸåŒè‰²çƒå¼€å¥–ä¸­ï¼Œä»çº¢è‰²çƒä¸­é€‰æ‹©6ä¸ªå·ç ï¼Œä»è“è‰²çƒä¸­é€‰æ‹©1ä¸ªå·ç ï¼Œå…±é€‰å‡º7ä¸ªå·ç ä½œä¸ºæŠ•æ³¨å·ç ã€‚
3. æ‚¨å¯ä»¥é€‰æ‹©æ‰‹åŠ¨é€‰å·æˆ–è€…ä½¿ç”¨æœºé€‰åŠŸèƒ½ã€‚æ‰‹åŠ¨é€‰å·æ—¶ï¼Œæ‚¨å¯ä»¥è‡ªè¡Œé€‰æ‹©6ä¸ªçº¢è‰²çƒå’Œ1ä¸ªè“è‰²çƒçš„å·ç ã€‚æœºé€‰åŠŸèƒ½ä¼šéšæœºç”Ÿæˆä¸€ç»„å·ç ã€‚
4. æ¯æ³¨åŒè‰²çƒçš„æŠ•æ³¨é‡‘é¢ä¸º2å…ƒäººæ°‘å¸ã€‚
5. æ‚¨å¯ä»¥é€‰æ‹©å•å¼æŠ•æ³¨æˆ–å¤å¼æŠ•æ³¨ã€‚å•å¼æŠ•æ³¨æ˜¯æŒ‡åªé€‰æ‹©ä¸€ç»„å·ç è¿›è¡ŒæŠ•æ³¨ï¼Œè€Œå¤å¼æŠ•æ³¨æ˜¯æŒ‡é€‰æ‹©å¤šç»„å·ç è¿›è¡ŒæŠ•æ³¨ï¼Œå¢åŠ ä¸­å¥–æœºä¼šã€‚
6. åŒè‰²çƒæ¯å‘¨è¿›è¡Œä¸¤æ¬¡å¼€å¥–ï¼Œåˆ†åˆ«æ˜¯æ¯å‘¨äºŒã€å››ã€æ—¥çš„æ™šä¸Š9ç‚¹ã€‚
7. å¼€å¥–æ—¶ï¼Œä¼šå…ˆä»çº¢è‰²çƒä¸­æ‘‡å‡º6ä¸ªå·ç ä½œä¸ºä¸­å¥–å·ç ï¼Œç„¶åå†ä»è“è‰²çƒä¸­æ‘‡å‡º1ä¸ªå·ç ä½œä¸ºè“è‰²çƒå·ç ã€‚
8. ä¸­å¥–è§„åˆ™æ ¹æ®æ‚¨é€‰æ‹©çš„å·ç ä¸ä¸­å¥–å·ç çš„åŒ¹é…æƒ…å†µæ¥ç¡®å®šã€‚å¥–é‡‘åˆ†ä¸ºä¸€ç­‰å¥–ã€äºŒç­‰å¥–ã€ä¸‰ç­‰å¥–ã€å››ç­‰å¥–ã€äº”ç­‰å¥–ã€å…­ç­‰å¥–å’Œä¸ƒç­‰å¥–ï¼Œå…¶ä¸­ä¸€ç­‰å¥–ä¸ºä¸­6çº¢+1è“ï¼ŒäºŒç­‰å¥–ä¸ºä¸­6çº¢ï¼Œä¾æ­¤ç±»æ¨ã€‚

ä¸‹é¢æ˜¯åŒè‰²çƒå„ä¸ªå¥–é¡¹çš„ä¸­å¥–æ¦‚ç‡å’Œå¥–é‡‘(æ€»ä¸­å¥–æ¦‚ç‡ä¸º**6.71%**)ï¼š

| å¥–é¡¹                            | ä¸­å¥–æ¦‚ç‡   | å¥–é‡‘ï¼ˆä¼°è®¡ï¼‰ |
| ------------------------------- | ---------- | ------------ |
| ä¸€ç­‰å¥–ï¼ˆä¸­6çº¢+1è“ï¼‰             | 1/17721088 | æ•°ç™¾ä¸‡å…ƒ     |
| äºŒç­‰å¥–ï¼ˆä¸­6çº¢ï¼‰                 | 0.0000846% | çº¦ 50ä¸‡å…ƒ    |
| ä¸‰ç­‰å¥–ï¼ˆä¸­5çº¢+1è“ï¼‰             | 0.000914%  | 3000å…ƒ       |
| å››ç­‰å¥–ï¼ˆä¸­5çº¢æˆ–4çº¢+1è“ï¼‰        | 0.0434%    | 200å…ƒ        |
| äº”ç­‰å¥–ï¼ˆä¸­4çº¢æˆ–3çº¢+1è“ï¼‰        | 0.7758%    | 10å…ƒ         |
| å…­ç­‰å¥–ï¼ˆä¸­1/2çº¢+1è“æˆ–ä»…ä¸­è“çƒï¼‰ | 5.889%     | 5å…ƒ          |

**æŠ•å…¥2å…ƒçš„åŒè‰²çƒï¼Œå¹³å‡ä½ å¯ä»¥æ‹¿åˆ°çš„æ”¶ç›Šä¸º1å…ƒä¸åˆ°ï¼Œä¸º0.9377å…ƒ**

## äºŒã€ç ”ç©¶æ€è·¯åŠç›®çš„

æƒ³ç ”ç©¶ä¸€ä¸ªä¸­å¤´å¥–çš„ç®—æ³•æ˜¾ç„¶æ˜¯ä¸å¤ªå¯èƒ½ï¼Œæ‰€ä»¥åˆæ­¥ç›®æ ‡æ˜¯å¸Œæœ›å°†**4ç­‰å¥–**çš„ä¸­å¥–æ¦‚ç‡æå‡åˆ°**1/100**ã€‚è¿™æ ·ä¾¿å¯ä»¥ä¿è¯è‡ªå·±æ¯ä¹°100æ³¨ï¼Œä¾¿å¯ä»¥ä¸­ä¸€ä¸ª4ç­‰å¥–ï¼Œä¸èµšä¸äºã€‚ç†æƒ³éå¸¸ä¸°æ»¡ï¼Œhahahahaï¼Œè®©æˆ‘ä»¬ç°åœ¨å¼€å§‹åŠ¨èµ·æ‰‹æ¥ã€‚

- æ˜¾ç„¶æ¯æ¬¡åŒè‰²çƒéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹éšæœºäº‹ä»¶ï¼Œå‰åçš„ç»“æœæ˜¯æ²¡æœ‰è”ç³»ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯é¦–å…ˆå°è¯•æŠŠå®ƒå»ºç«‹æˆä¸€ä¸ªæ—¶é—´åºåˆ—æ¨¡å‹ã€‚ä¸‹ä¸€æ¬¡çš„ä¸­å¥–ç»“æœç”±å‰Næ¬¡ç»“æœæ¨å¯¼å¾—åˆ°ã€‚
- æ—¢ç„¶æç„å­¦ï¼Œé‚£å¿…é¡»å¾—æä¸€æ‰‹æ·±åº¦å­¦ä¹ ã€‚ç‚¼ä¸¹ä¸ç„å­¦ç®€ç›´ä¸è¦å¤ªé…ã€‚é¦–é€‰æ·±åº¦å­¦ä¹ ç½‘ç»œLSTM
- æ¨¡å‹æœ‰äº†ï¼Œè¿˜éœ€è¦ç”¨æ•°æ®å»è°ƒæ•™ã€‚é‚£å°±å¿…é¡»ä¸Šä¸€æ‰‹çˆ¬è™«ï¼ŒæŠŠè¿‘å‡ åå¹´çš„ä¸­å¥–ç»“æœæå‡ºæ¥ã€‚

è¯´å¹²å°±å¹²ï¼

##  ä¸‰ã€è·å–å†å²ä¸­å¥–ç»“æœ

### åˆ†æç½‘é¡µæºç 

![image-20231204082407590](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204082407590.png)

1. é€‰æ‹©ä¸­å½©ç½‘ï¼Œæ‰“å¼€æµè§ˆå™¨æºç ä½¿ç”¨F12æŸ¥çœ‹æºç ï¼Œç½‘é¡µåœ¨æ¯æ¬¡æŸ¥è¯¢çš„æ—¶å€™éƒ½ä¼šå‘é€ä¸€ä¸ªå¼‚æ­¥çš„jQueryè¯·æ±‚ï¼Œè¿”å›jsonæ ¼å¼çš„æŸ¥è¯¢ç»“æœã€‚ï¼ˆéè®¡ç®—æœºä¸“ä¸šï¼Œå¯¹ç½‘é¡µå‰åç«¯çš„æœºåˆ¶ä»…æ˜¯ç®€å•äº†è§£ï¼‰
2. ä½¿ç”¨python requeståº“æ¨¡ä»¿è¯·æ±‚ï¼Œçˆ¬å–å†å²æ•°æ®
3. ç®€å•å°†è¿™ä¸ªurlç›´æ¥è¯·æ±‚è¿”å›çš„æ•°æ®ä¸ºç©ºï¼›ç®€å•æœç´¢ä¸€ä¸‹ï¼Œå¯ä»¥çŸ¥é“è¿™ä¸ªæ˜¯jQueryåœ¨è¿›è¡Œè·¨åŸŸè¯·æ±‚çš„æ—¶å€™åˆ©ç”¨jsonpè¿›è¡Œå¤„ç†é€ æˆçš„ç°è±¡ã€‚æ³¨æ„å‡ ç‚¹ï¼š1ï¼‰éœ€è¦è®¾ç½®`Referer`å¤´ï¼Œå› ä¸ºè¿™æ˜¯è·¨åŸŸè¯·æ±‚ï¼›2ï¼‰`_=1701651618276`æ˜¯æ—¶é—´æˆ³ï¼›

4. ä¸ºäº†ä¿é™©èµ·è§ï¼Œåˆæ·»åŠ äº†cookieå’ŒUser-Agentå¤´

   ```python
   import requests
   import json
   import random
   url = 'https://jc.zhcw.com/port/client_json.php'
   headers = {
       "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0",
       "Referer": "https://www.zhcw.com/"
   }
   cookies = {
       "Hm_lvt_692bd5f9c07d3ebd0063062fb0d7622f": "1701622572",
       "_gid": "GA1.2.1218667687.1701622572",
       "Hm_lvt_12e4883fd1649d006e3ae22a39f97330": "1701622573",
       "PHPSESSID": "6k70gq2h44nksmou3n8374jq13",
       "_ga_9FDP3NWFMS": "GS1.1.1701622572.1.1.1701623257.0.0.0",
       "_ga": "GA1.2.1720843243.1701622572",
       "Hm_lpvt_12e4883fd1649d006e3ae22a39f97330": "1701623257",
       "Hm_lpvt_692bd5f9c07d3ebd0063062fb0d7622f": "1701623258"
   }
   params = {
           'callback':'jQuery112208474410773064831_1701622567918',
           'transactionType':10001001,
           'lotteryId':1,
           'issueCount':0,
           'startIssue':'',
           'endIssue':'',
           'startDate':'2003-02-01',
           'endDate':'2003-04-01',
           'type':2,
           'pageNum':1,'pageSize':30,
           "tt": random.random(),
           "_": str(int(time.time() * 1000))
       }
   # å‘é€HTTP GETè¯·æ±‚
   response = requests.get(url,headers=headers,cookies=cookies,params=params)
   
   # æå–JSONPå“åº”ä¸­çš„JSONæ•°æ®
   json_data = response.text.split('(')[1].split(')')[0]
   # è§£æJSONæ•°æ®
   data = json.loads(json_data)
   # æå–åŒè‰²çƒå·ç ä¿¡æ¯
   for entry in data['data']:
       issue = entry['issue']
       openTime = entry["openTime"]
       front_winning_num = entry['frontWinningNum']
       back_winning_num = entry['backWinningNum']
       saleMoney = entry["saleMoney"]
       print(f"{issue} |{openTime}|{front_winning_num} |{back_winning_num} |{saleMoney}")
   
   ```
   
   ```
   ç»“æœè¾“å‡ºï¼š
   2003011 |2003-03-30|04 05 11 12 30 32 |15 |12782494
   2003010 |2003-03-27|01 02 08 13 17 24 |13 |12402130
   2003009 |2003-03-23|05 09 18 20 22 30 |09 |12386072
   ...
   ```
   
   
   
   
   
   

### ä¿å­˜åˆ°æ–‡ä»¶

![image-20231204092839207](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204092839207.png)

1. æ¯ä¸€æœŸçš„çš„ä¿¡æ¯æœ‰å¾ˆå¤šï¼šæ—¥æœŸã€å¼€å¥–æ—¥æœŸã€ä¸­å¥–å·ã€é”€å”®é¢ã€å¥–æ± ã€ä¸­å¥–æƒ…å†µã€‚ä½†æ˜¯ä¸€äº›æ—©æœŸæ•°æ®ä¸€äº›æ•°æ®æ˜¯ç¼ºå¤±çš„ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ä¿ç•™**å¼€å¥–æ—¥æœŸ**ã€**æœŸå·**ã€**ä¸­å¥–å·ç **ã€**é”€å”®é¢**ã€å¥–é‡‘æ± ã€‚

2. ä¿å­˜æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä»¥çº¯æ–‡æœ¬ä¿å­˜åˆ°CSVé‡Œã€‚

3. å› ä¸ºæ¯æ¬¡åªèƒ½çˆ¬å–30æ¡æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‰ç…§æœˆä»½æ¥åˆ’åˆ†ï¼Œæ¯2ä¸ªæœˆçˆ¬å–ä¸€æ¬¡ï¼Œ2ä¸ªæœˆå†…ä¸ä¼šè¶…è¿‡30æ¬¡å¼€å¥–ã€‚åŒè‰²çƒä»2003å¹´2æœˆ16æ—¥ï¼Œæˆ‘ä»¬ä¾¿ä»20230201å¼€å§‹çˆ¬å– ,ç”Ÿæˆæ¯æ¬¡çš„æ—¶é—´èŠ‚ç‚¹å­—ç¬¦ä¸²ã€‚

   ```python
   import datetime
   def add_two_months(date_str):
       date_format = "%Y-%m-%d"
       current_date = datetime.datetime.strptime(date_str, date_format)
       now = datetime.datetime.now()
       datestart = []
       dateend = []
       while current_date < now:
           datestart.append(current_date.strftime(date_format))
           current_date_end = current_date + datetime.timedelta(days=59)
           if  current_date_end < now:
               dateend.append(current_date_end.strftime(date_format))
           else:
               dateend.append(now.strftime(date_format))
           current_date = current_date + datetime.timedelta(days=60)
       return datestart,dateend
   start_date = "2003-02-01"
   datestart,dateend = add_two_months(start_date)
   print(datestart)
   print(dateend)
   ```

   ```
   è¾“å‡ºç»“æœï¼š
   ['2003-02-01', '2003-04-02', '2003-06-01', '2003-07-31',...,'2023-02-16', '2023-04-17', '2023-06-16', '2023-08-15', '2023-10-14']
   ['2003-04-01', '2003-05-31', '2003-07-30', '2003-09-28',..., '2023-04-16', '2023-06-15', '2023-08-14', '2023-10-13', '2023-12-04']
   ```

4. å¾ªç¯çˆ¬å–å¹¶ä¿å­˜

   ```python
   file = open('Bicolorballs.csv', 'w')  # æ‰“å¼€Bicolorballs.csvæ–‡ä»¶ï¼Œå†™æ¨¡å¼
   for s,e  in zip(datestart,dateend):
       params = {
           'callback':'jQuery112208474410773064831_1701622567918',
           'transactionType':10001001,
           'lotteryId':1,
           'issueCount':0,
           'startIssue':'',
           'endIssue':'',
           'startDate':s,
           'endDate':e,
           'type':2,
           'pageNum':1,'pageSize':30,
           "tt": random.random(),
           "_": str(int(time.time() * 1000))
       }
       # å‘é€HTTP GETè¯·æ±‚
       response = requests.get(url,headers=headers,cookies=cookies,params=params)
   
       # æå–JSONPå“åº”ä¸­çš„JSONæ•°æ®
       json_data = response.text.split('(')[1].split(')')[0]
       # è§£æJSONæ•°æ®
       data = json.loads(json_data)
       # æå–åŒè‰²çƒå·ç ä¿¡æ¯
       for entry in data['data']:
           issue = entry['issue']
           openTime = entry["openTime"]
           front_winning_num = entry['frontWinningNum']
           back_winning_num = entry['backWinningNum']
           saleMoney = entry["saleMoney"]
           prizePoolMoney = entry["prizePoolMoney"]
           data = f"{issue},{openTime},{front_winning_num},{back_winning_num},{saleMoney},{prizePoolMoney}\r\n"
           file.write(data)
   file.close()  # å…³é—­æ–‡ä»¶
   ```

   ![image-20231204104235092](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204104235092.png)

5. å› ä¸ºå¤šæ¬¡è¯·æ±‚ï¼Œå“åº”è¿”å›çš„æ—¶é—´ä¸åŒä¼šå¯¼è‡´æ•°æ®çš„é¡ºåºæ˜¯ä¹±çš„ï¼Œä½†è¿™ä¸é‡è¦ï¼Œä½¿ç”¨excelæ‰“å¼€ï¼Œæ’ä¸€ä¸‹åºå°±å¯ä»¥äº†ã€‚

6. çªç„¶æƒ³åˆ°ä¸€ä¸ªæœ‰è¶£çš„äº‹ï¼Œè¿‘20å¹´çš„åŒå½©çƒçš„é”€å”®é¢æ›²çº¿ä¼šæ˜¯æ€æ ·çš„å‘¢ï¼Ÿå“ˆå“ˆå“ˆï¼Œä¼šä¸ä¼šå’Œå›½å®¶ç»æµå‘å±•æ›²çº¿å®Œå…¨å»åˆå‘¢ï¼Ÿ

   ![image-20231204105508973](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204105508973.png)

   ä¸‹å›¾æ˜¯2003å¹´åˆ°2023å¹´çš„å›½å®¶GDPå˜åŒ–æƒ…å†µï¼š

   ![China GDP](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/china-gdp.png)
   
   **ä¸èƒ½è¯´æ¯«æ— å…³ç³»ï¼Œåªèƒ½è¯´è¿‘ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œå½©ç¥¨é”€å”®é¢ä»é•¿æœŸæ¥çœ‹å¤§è‡´å’Œå›½å®¶ç»æµå‘å±•æœ‰å…³ï¼Œå…¶é”€å”®é¢åœ¨2016å¹´ä»¥ååŸºæœ¬ä¿æŒç¨³å®šï¼ŒçŒœæµ‹å¯èƒ½æœ‰ä¸¤ä¸ªåŸå› ï¼šå¸‚åœºè§„æ¨¡å¢é•¿åˆ°ä¸Šé™æˆ–è€…å’Œè¿‘å‡ å¹´ä¸­å›½ç»æµå¢é•¿æ”¾ç¼“æœ‰å…³ã€‚é™¤æ­¤ä¹‹å¤–é”€å”®é¢ä¹Ÿä¼šè¿˜ä¼šå—åˆ°å„ç§çªå‘çŠ¶å†µçš„å†²å‡»ï¼Œæ¯”å¦‚2020å¹´çš„ç–«æƒ…ï¼Œä½¿å¾—é”€å”®äº†å‡ºç°äº†ä¸€ä¸ªæ˜æ˜¾çš„ä½è°·ï¼›åœ¨2022å¹´ç–«æƒ…æ¢å¤åï¼Œåˆåå¼¹åˆ°ä¸€ä¸ªå°é«˜å³°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé”€å”®é¢è¿˜è¡¨ç°å‡ºå‘¨æœŸæ€§ï¼Œæ¯å¹´çš„å¹´åˆå’Œå¹´æœ«æ¯”è¾ƒé«˜ï¼Œå¹´ä¸­æ¯”è¾ƒä½ï¼Œè¿™æ˜¯ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œæ¨æµ‹å‡ºç°æ­¤ç°è±¡çš„åŸå› 1ï¼‰å›å®¶è¿‡å¹´2ï¼‰å¹´ç»ˆå¥– 3ï¼‰å¹´åº•å‘å·¥èµ„ã€‚**
   
   æœ€åé™„ä¸Šä¸€å¼ é”€å”®é¢å’Œå¥–é‡‘æ± çš„å†å²å˜åŒ–æ›²çº¿ï¼š
   
   ![image-20231204115553164](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204115553164.png)

##  å››ã€æ„å»ºç®—æ³•æ¨¡å‹

### 1.åŸå§‹æ•°æ®åˆ†å¸ƒ

æˆ‘ä»¬é¦–å…ˆä»åŸå§‹æ•°æ®çš„æ¦‚ç‡åˆ†å¸ƒå…¥æ‰‹ï¼Œçœ‹ä¸€ä¸‹èƒ½ä¸èƒ½æ‰¾åˆ°ä¸€äº›è§„å¾‹ã€‚ç»Ÿè®¡æ‰€æœ‰çƒä¸­å¥–çš„æ¦‚ç‡åˆ†å¸ƒï¼š

![image-20231204133949925](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204133949925.png)

æ¦‚ç‡æœ€å¤§çš„5ä¸ªçº¢è‰²çƒä¸ºï¼š**14**ï¼Œ**24**ï¼Œ**1**ï¼Œ**22**ï¼Œ**6**ï¼Œ**17**ï¼›è“è‰²çƒä¸º**1**ã€‚é¢‘æ¬¡åˆ†åˆ«ä¸º614ï¼Œ614ï¼Œ597ï¼Œ594ï¼Œ586ï¼Œ585å’Œ213ã€‚

### 2.æ¨¡å‹v0.1

#### æ•°æ®é›†æ„é€ 

æˆ‘ä»¬é¦–å…ˆç®€å•**å‡è®¾ä¸‹ä¸€æ¬¡çƒçš„æ•°å­—ä»…å—ä¹‹å‰ä¸­å¥–æ•°å­—çš„å½±å“**ã€‚é‚£ä¹ˆæ•°æ®é›†åªéœ€è¦å¼•å…¥çº¢è‰²çƒç¼–å·å’Œè“è‰²çƒç¼–å·2ä¸ªå˜é‡ã€‚çº¢çƒç¼–å·ä¸º1-33çš„5ä¸ªä¸é‡å¤æ•°å­—ï¼Œè“çƒä¸º1-16çš„å•ä¸ªæ•°å­—ã€‚æˆ‘å°†å…¶æ„é€ ä¸º
$$
R = I_{33\times 1 },
B = I_{16\times 1},å…¶ä¸­i_å¥– = 1,i_æ—  = 0
$$

ä¹‹å‰è§‚å¯Ÿåˆ°å½©ç¥¨é”€å”®é¢çš„å¹´å†…å‘¨æœŸå˜åŒ–è§„å¾‹ï¼Œæˆ‘ç®€å•çš„å‡è®¾ä¸‹ä¸€æ¬¡çš„ä¸­å¥–çƒç¼–å·æ”¶åˆ°ä¹‹å‰ä¸€å¹´çš„ä¸­å¥–(çº¦150æ¬¡)ç»“æœçš„å½±å“ï¼Œå³ï¼š
$$
R_t,B_t = f(R_{t-1},B_{t-1},R_{t-2},B_{t-2},...R_{t-150},B_{t-150})
$$
æˆ‘ä»¬çš„ç›®çš„å³ä¸ºæ„é€ æ—¶é—´åºåˆ—æ¨ç†**æ¨¡å‹f**ã€‚

åŸºäºæˆ‘ç›®å‰æ‰€å­¦çš„çŸ¥è¯†ï¼Œæˆ‘é€‰æ‹©LSTMæ·±åº¦å­¦ä¹ æ¨¡å‹([é•¿çŸ­æœŸè®°å¿†é€’å½’ç¥ç»ç½‘ç»œ](https://zhuanlan.zhihu.com/p/123857569))ã€‚

åŸºäºåŒè‰²çƒçš„æ¸¸æˆè§„åˆ™ï¼Œè“è‰²çƒä¸­å¥–æ¯”çº¢è‰²çƒä¸­è¦é‡è¦çš„å¤šï¼Œæˆ‘ä»¬æ˜¾ç„¶åº”è¯¥åœ¨æ¨¡å‹å†…éƒ¨ç»™ä¸è“è‰²çƒæ›´å¤šçš„å…³æ³¨ã€‚ä½†ä½œä¸ºæ­¤æ¨¡å‹çš„æ—©æœŸç‰ˆæœ¬ï¼Œæˆ‘ä»¬å‡è®¾**çº¢ç¯®çƒä¸­å¥–ç»“æœç›¸äº’ç‹¬ç«‹**ï¼Œå°†ä¸Šè¿°æ¨¡å‹è¿›ä¸€æ­¥ç®€åŒ–ä¸ºï¼š
$$
R_t = f_1(R_{t-1},R_{t-2},...R_{t-150})       ,\\
B_t = f_2(B_{t-1},B_{t-2},...B_{t-150})
$$

å³åˆ†åˆ«è®­ç»ƒ2ä¸ªLSTMæ¨¡å‹å•ç‹¬æ¨ç†çº¢çƒå’Œè“çƒã€‚åˆ°æ­¤æˆ‘ä»¬å¯ä»¥å¼€å§‹ç€æ‰‹æ„é€ æˆ‘ä»¬çš„æ•°æ®é›†äº†ï¼š

**è¯»å–æ•°æ®**

```python
import numpy as np
import tensorflow as tf

with open('Bicolorballs.csv', 'r') as file:
    reader = csv.reader(file)
    red_balls = []
    blue_balls = []
    for row in reader:
        red = np.array([int(i)-1 for i in row[2].split(' ')])
        # ç¼–ç 
        red = tf.one_hot(red, depth=33)
        red = tf.reduce_sum(red, axis=0)
        red_balls.append(red)
        blue = np.array([int(row[3])-1])
        blue = tf.one_hot(blue, depth=16)
        blue = tf.reduce_sum(blue, axis=0)
        blue_balls.append(blue)
print("æ•°æ®é›†é•¿åº¦ä¸ºï¼š",len(red_balls))
print("çº¢çƒç¼–ç åä¸ºï¼š",red_balls[0].numpy())
print("è“çƒç¼–ç åä¸ºï¼š",blue_balls[0].numpy())
#è¾“å‡ºç»“æœï¼š
#æ•°æ®é›†é•¿åº¦ä¸ºï¼š 3083
#çº¢çƒç¼–ç åä¸ºï¼š [0. 0. 0. 0. 0. 0. 0. 0. 0. 1. 1. 1. 1. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 1. 0. 1. 0. 0. 0. 0. 0.]
#è“çƒç¼–ç åä¸ºï¼š [0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 1. 0. 0. 0. 0. 0.]
```

**æ„å»ºçº¢çƒçš„æ•°æ®é›†ï¼Œæ—¶é—´æ­¥ä¸º150ï¼Œå‰é¢80%çš„æ•°æ®ä¸ºè®­ç»ƒé›†ï¼Œ20%ä¸ºæµ‹è¯•é›†**

```python
data = tf.stack(red_balls)
# å®šä¹‰è¶…å‚æ•°
n_steps = 150  # æ—¶é—´æ­¥æ•°ï¼Œå³æ¯ä¸ªæ ·æœ¬åŒ…å«çš„å†å²æ—¶é—´æ­¥æ•°
T = len(data)
features = []
for i in range(T-n_steps):
    features.append(data[i: n_steps + i,:])
labels = data[n_steps:,:]
features = tf.stack(features) 

# å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†
train_size = int(len(data) * 0.8)
train_X, train_y = features[:train_size], labels[:train_size]
test_X, test_y = features[train_size:],labels[train_size:]

# åˆ›å»ºtf.data.Datasetå¯¹è±¡
train_dataset = tf.data.Dataset.from_tensor_slices((train_X, train_y))
test_dataset = tf.data.Dataset.from_tensor_slices((test_X, test_y))

# å¯é€‰ï¼šå¯¹æ•°æ®é›†è¿›è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œä¾‹å¦‚ä¹±åºã€æ‰¹é‡åŒ–å’Œç¼“å­˜ç­‰
train_dataset = train_dataset.shuffle(100).batch(32).prefetch(tf.data.AUTOTUNE)
test_dataset = test_dataset.batch(32).cache().prefetch(tf.data.AUTOTUNE)

#æµ‹è¯•æ•°æ®é›†çš„çš„å½¢çŠ¶
#data,label = iter(train_dataset.take(1)).next()
#print(data.shape)
#(32, 150, 33)     #(B,T,C)
```

#### æ„é€ æ¨¡å‹

é¦–å…ˆæ­å»ºä¸€ä¸ªç®€å•çš„**åŒå±‚LSTMç½‘ç»œ**ï¼ŒLSTMå•å…ƒæ•°é‡ä¸º64/128/256ï¼Œè¾“å‡ºå±‚ä½¿ç”¨å…¨è¿æ¥å±‚ï¼ˆ33ï¼‰ï¼Œå°†è¾“å‡ºå˜ä¸º33é€šé“çš„è¾“å‡ºï¼Œå†æ¥**sigmoid**å±‚å°†è¾“å‡ºå‘é‡æ˜ å°„åˆ°0-1ä¹‹é—´çš„æ¦‚ç‡ã€‚æŸå¤±å‡½æ•°ä½¿ç”¨å¤šåˆ†ç±»çš„**äº¤å‰ç†µæŸå¤±å‡½æ•°**ã€‚

```python
import tensorflow as tf
from tensorflow.keras.models import Sequential
from tensorflow.keras.layers import LSTM, Dense
# å®šä¹‰è¾“å…¥å’Œè¾“å‡ºå½¢çŠ¶
input_shape = (150, 33)
output_shape = (1, 33)
# åˆ›å»ºåŒå±‚LSTMç½‘ç»œ
model = Sequential()
model.add(LSTM(64, return_sequences=True, input_shape=input_shape))  # ç¬¬ä¸€å±‚LSTM
model.add(LSTM(64))  # ç¬¬äºŒå±‚LSTM
model.add(Dense(output_shape[-1], activation='sigmoid'))  # è¾“å‡ºå±‚
# ç¼–è¯‘æ¨¡å‹
model.compile(optimizer='adam', loss='categorical_crossentropy', metrics=['accuracy'])
# æ‰“å°æ¨¡å‹ç»“æ„
model.summary()
################################################
#Model: "sequential"
#_________________________________________________________________
# Layer (type)                Output Shape              Param #   
#=================================================================
# lstm (LSTM)                 (None, 150, 64)           25088     
#                                                                 
# lstm_1 (LSTM)               (None, 64)                33024     
#                                                                 
# dense (Dense)               (None, 33)                2145      
#                                                                 
#=================================================================
#Total params: 60,257
#Trainable params: 60,257
#Non-trainable params: 0
```

#### æ¨¡å‹è®­ç»ƒ

**å¼€å§‹è®­ç»ƒï¼Œè§è¯æˆ‘ä¸€å¤©çš„ç ”ç©¶æˆæœã€‚å°†è®­ç»ƒæ—¥å¿—å’Œæœ€ä¼˜å‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œå­¦ä¹ ç‡é»˜è®¤ä¸º0.001**

```python
from datetime import datetime
from tensorflow import keras
EPOCHS = 200
NetNAME = 'LSTM2'
tf.debugging.set_log_device_placement(True)
timestamp = datetime.now().strftime("%Y%m%d-%H%M%S")
NAME = timestamp + NetNAME +"_batchsize";print(NAME)
logdir = "./logs/" + NAME
modeldir = "./model/"+NAME+".h5"
tensorboard_callback = keras.callbacks.TensorBoard(log_dir=logdir)
checkpoint = tf.keras.callbacks.ModelCheckpoint(filepath=modeldir, monitor='val_accuracy', verbose=1, save_best_only=True, mode = 'max')
with tf.device('/GPU:0'):
    model.fit(
        x=train_dataset, 
        epochs=EPOCHS,     
        validation_data=test_dataset,    
        callbacks=[tensorboard_callback,checkpoint])
```

è®­ç»ƒäº†å‡ éåï¼Œç›®å‰çœ‹èµ·æ¥è¿˜ç®—è¯´çš„è¿‡å»çš„ç»“æœæ˜¯è¿™æ ·çš„ã€‚æµ‹è¯•é›†å’Œè®­ç»ƒé›†çš„æŸå¤±å‡½æ•°ä¼šä¸‹é™ä¸€ç‚¹ï¼Œä½†ç»å¯¹å€¼è¿˜æ˜¯å¾ˆå¤§ï¼Œæ¨¡å‹æ˜¯ä¸æ”¶æ•›çš„ã€‚çœ‹ç²¾åº¦å˜åŒ–æ›²çº¿çš„è¯ï¼Œåœ¨è®­ç»ƒ200è½®çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯æœ‰å‡ æ¬¡ç²¾åº¦æ¯”è¾ƒé«˜çš„ï¼Œè¯´æ˜æ¨¡å‹å¶ç„¶çŒœå¯¹äº†éƒ¨åˆ†æ•°æ®ã€‚

![image-20231204191600099](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204191600099.png)

![image-20231204191637930](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204191637930.png)

æ­¤å¤–ï¼Œæˆ‘ä»¬é‡‡ç”¨åŒæ ·çš„æ–¹æ³•è®­ç»ƒ**è“çƒæ¨¡å‹**ã€‚å› ä¸ºè“çƒæœ€ç»ˆåªæœ‰ä¸€ä¸ªç»“æœï¼Œæ‰€ä»¥è¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°æˆ‘ä»¬é€‰æ‹©**softmaxå±‚**ï¼ŒæŸå¤±å‡½æ•°é€‰æ‹©**äºŒåˆ†ç±»äº¤å‰ç†µæŸå¤±å‡½æ•°**ã€‚

```python
import tensorflow as tf
from tensorflow.keras.models import Sequential
from tensorflow.keras.layers import LSTM, Dense
from tensorflow.keras.callbacks import LearningRateScheduler
from datetime import datetime
from tensorflow import keras
from tensorflow.keras.callbacks import LearningRateScheduler

data = tf.stack(blue_balls)
# å®šä¹‰è¶…å‚æ•°
n_steps = 150  # æ—¶é—´æ­¥æ•°ï¼Œå³æ¯ä¸ªæ ·æœ¬åŒ…å«çš„å†å²æ—¶é—´æ­¥æ•°
T = len(data)
features = []
for i in range(T-n_steps):
    features.append(data[i: n_steps + i,:])
labels = data[n_steps:,:]
features = tf.stack(features) 

# å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†
train_size = int(len(data) * 0.8)
train_X, train_y = features[:train_size], labels[:train_size]
test_X, test_y = features[train_size:],labels[train_size:]

# åˆ›å»ºtf.data.Datasetå¯¹è±¡
train_dataset = tf.data.Dataset.from_tensor_slices((train_X, train_y))
test_dataset = tf.data.Dataset.from_tensor_slices((test_X, test_y))

# å¯é€‰ï¼šå¯¹æ•°æ®é›†è¿›è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œä¾‹å¦‚ä¹±åºã€æ‰¹é‡åŒ–å’Œç¼“å­˜ç­‰
train_dataset = train_dataset.shuffle(100).batch(32).prefetch(tf.data.AUTOTUNE)
test_dataset = test_dataset.batch(32).cache().prefetch(tf.data.AUTOTUNE)

# å®šä¹‰è¾“å…¥å’Œè¾“å‡ºå½¢çŠ¶
input_shape = (150, 16)
output_shape = (1, 16)
# åˆ›å»ºåŒå±‚LSTMç½‘ç»œ
model = Sequential()
model.add(LSTM(64, return_sequences=True, input_shape=input_shape))  # ç¬¬ä¸€å±‚LSTM
model.add(LSTM(64))  # ç¬¬äºŒå±‚LSTM
model.add(Dense(output_shape[-1], activation='softmax'))  # è¾“å‡ºå±‚
# ç¼–è¯‘æ¨¡å‹
model.compile(optimizer='adam', loss='binary_crossentropy', metrics=['accuracy'])
# æ‰“å°æ¨¡å‹ç»“æ„


EPOCHS = 400
NetNAME = 'B_LSTM2'
tf.debugging.set_log_device_placement(True)
timestamp = datetime.now().strftime("%Y%m%d-%H%M%S")
NAME = timestamp + NetNAME +"_batchsize";print(NAME)
logdir = "./logs/" + NAME
modeldir = "./model/"+NAME+".h5"

def lr_scheduler(epoch, lr):
    if epoch % 100 == 0 and epoch != 0:
        lr = lr / 2
    return lr
lr_callback = LearningRateScheduler(lr_scheduler)
tensorboard_callback = keras.callbacks.TensorBoard(log_dir=logdir)
checkpoint = tf.keras.callbacks.ModelCheckpoint(filepath=modeldir, monitor='val_accuracy', verbose=1, save_best_only=True, mode = 'max')
with tf.device('/GPU:0'):
    model.fit(
        x=train_dataset, 
        epochs=EPOCHS,     
        validation_data=test_dataset,    
        callbacks=[tensorboard_callback,checkpoint])
```

å“ï¼è“çƒä½ æ˜¯ä¸€ç‚¹ä¹Ÿå­¦ä¸ä¼šå•Šï¼Œä¸¥é‡è¿‡æ‹Ÿåˆäº†ã€‚

![image-20231204194418091](https://blog-1257904201.cos.ap-shanghai.myqcloud.com/img/image-20231204194418091.png)

#### æ¨¡å‹æ¨ç†

åŠ è½½çº¢çƒå’Œè“çƒæ¨¡å‹è¿›è¡Œæ¨ç†ï¼Œçº¢è‰²çƒå–æ¦‚ç‡å€¼æœ€é«˜çš„6ä¸ªï¼Œè“è‰²çƒå–æœ€é«˜çš„5ä¸ªã€‚çŒœæµ‹äº”æ¬¡ï¼Œæ¯æ¬¡çº¢çƒä¸å˜è“çƒå˜ã€‚æ ¹æ®çœŸå€¼åˆ¤æ–­è‡ªå·±å¾—äº†å‡ ç­‰å¥–ï¼Œ**å¼€ç©ï¼ï¼ï¼ï¼ï¼**

```python
import tensorflow as tf
from tensorflow.keras.models import load_model

def CalculateTheAwards(R,B,Rlabel,Blabel):
    R = R.numpy()
    B = B.numpy()
    Rlabel = Rlabel.numpy()
    Blabel = Blabel.numpy()
    Rcount = 0
    Bcount = Blabel[B]
    for r in R:
        Rcount = Rcount + Rlabel[r]
    if Bcount+Rcount ==7:
        print('æ­å–œä½ ï¼Œä½ ä¸­ä¸€ç­‰å¥–äº†ï¼ï¼')
    elif Rcount ==6 and Bcount ==0:
        print('æ­å–œä½ ï¼Œä½ ä¸­äºŒç­‰å¥–äº†ï¼ï¼')
    elif Rcount ==5 and Bcount ==1:
        print('æ­å–œä½ ï¼Œä½ ä¸­ä¸‰ç­‰å¥–äº†ï¼ï¼')
    elif Bcount+Rcount ==5:
        print('æ­å–œä½ ï¼Œä½ ä¸­å››ç­‰å¥–äº†ï¼ï¼')
    elif Bcount+Rcount ==4:
        print('æ­å–œä½ ï¼Œä½ ä¸­äº”ç­‰å¥–äº†ï¼ï¼')
    elif Bcount ==1 :
        print('æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼')
    else:
        print('å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–')
# åŠ è½½æ¨¡å‹
Rmodel = load_model('model/20231204-174742LSTM2_lr100_batchsize.h5')   #20231204-173622LSTM2_batchsize.h5
Bmodel = load_model('model/20231204-192802B_LSTM2_batchsize.h5')

i = 2   #æµ‹è¯•æ•°æ®ç¼–å·
# åŠ è½½æ–°çš„æ•°æ®è¿›è¡Œæ¨ç†
R = tf.expand_dims(tf.stack(red_balls[-150-i:-i]), axis=0)
B = tf.expand_dims(tf.stack(blue_balls[-150-i:-i]), axis=0)
Rlabel = red_balls[-i+1]
Blabel = blue_balls[-i+1]
print(Rlabel.numpy())
print(Blabel.numpy())
# å¯¹æ–°æ•°æ®è¿›è¡Œé¢„æµ‹
Rpredictions = Rmodel.predict(R,verbose=0)
Bpredictions = Bmodel.predict(B,verbose=0)
# # æ‰“å°é¢„æµ‹ç»“æœ
# print(Rpredictions)
# print(Bpredictions)

# é€‰æ‹©å‡ºæœ€å¤§çš„5/6ä¸ªå…ƒç´ çš„ç´¢å¼•
_, Rindices = tf.math.top_k(tf.constant(Rpredictions[0]), k=6)
_, Bindices = tf.math.top_k(tf.constant(Bpredictions[0]), k=5)
print(f'é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[0]+1).numpy()}')
CalculateTheAwards(Rindices,Bindices[0],Rlabel,Blabel)
print(f'é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[1]+1).numpy()}')
CalculateTheAwards(Rindices,Bindices[1],Rlabel,Blabel)
print(f'é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[2]+1).numpy()}')
CalculateTheAwards(Rindices,Bindices[2],Rlabel,Blabel)
print(f'é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[3]+1).numpy()}')
CalculateTheAwards(Rindices,Bindices[3],Rlabel,Blabel)
print(f'é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[4]+1).numpy()}')
CalculateTheAwards(Rindices,Bindices[4],Rlabel,Blabel)
```

#### æ¨¡æ‹Ÿæ¸¸æˆ

æˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬çš„æ¨¡å‹ï¼ŒåŸºäºå†å²å¼€å¥–æ•°æ®è¿›è¡Œæ¨¡æ‹Ÿæ¸¸æˆã€‚**æ¯æ¬¡ä¸‹æ³¨ç»“æœéƒ½æ˜¯ä½¿ç”¨å‰150æ¬¡çš„ä¸­å¥–æ•°å­—é€šè¿‡æ¨¡å‹æ¨ç†å¾—åˆ°çš„**ã€‚æ¯æ¬¡ä¹°5æ³¨ï¼Œ10å—é’±ã€‚æˆ‘ä»¬å…ˆç©10æ¬¡çœ‹çœ‹

```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 1 0 0 0 1 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º11    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 1 0 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 1 1 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 1 0 0 1 1 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 1 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º14    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º11    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 1 0 0 0 0 0 1 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0]
è“çƒå¼€å¥–ç»“æœï¼š [1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0]
è“çƒå¼€å¥–ç»“æœï¼š [1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º5    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º8    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 0]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º13    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º7    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
```
```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 0 1 1 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1]
è“çƒå¼€å¥–ç»“æœï¼š [0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º16    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º15    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º3    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     æ­å–œä½ ï¼Œä½ ä¸­å…­ç­‰å¥–äº†ï¼ï¼5å—é’±
```

```
çº¢çƒå¼€å¥–ç»“æœï¼š [0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0 0 0 1 0 0 0 0 0 1]
è“çƒå¼€å¥–ç»“æœï¼š [1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º9    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º16    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º4    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º13    ---->     å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰ä¸­å¥–
é¢„æµ‹ç»“æœæ˜¯çº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1    ---->     æ­å–œä½ ï¼Œä½ ä¸­äº”ç­‰å¥–äº†ï¼ï¼10å—é’±
```

**hahahahahahahahahaha**ï¼Œçº¢çƒæ¨¡å‹çš„è¾“å‡ºç»“æœæ¯æ¬¡æ˜¯ä¸åŒçš„ï¼Œä½†æ¦‚ç‡æœ€é«˜çš„æ°¸è¿œæ˜¯è¿™6ä¸ªæ•°ï¼Œ**æœ‰é—®é¢˜çš„**ï¼Œå®ƒä¼¼ä¹åªå–œæ¬¢ä¹°è¿™å‡ ä¸ªå·ã€‚ä½†ä¸ç®¡æ€æ ·ï¼Œ6ç­‰å¥–æ¦‚ç‡è¿˜å¯ä»¥ã€‚ä»Šå¤©ç®—æ˜¯æ²¡ç™½å¹²ï¼ˆè€—è´¹11hï¼‰ï¼Œ**ä»¥åæœ‰ç©ºå†æv0.2**ã€‚

#### é—®é¢˜æ€»ç»“

æ–¹ä¾¿ä¸‹æ¬¡æ”¹è¿›ï¼Œ1ï¼‰çº¢çƒè¾“å‡ºæ˜¯å›ºå®šçš„ï¼Œ2ï¼‰è“çƒæ¨¡å‹æ˜¯ä¸¥é‡è¿‡æ‹Ÿåˆçš„ã€‚ä¸¤ä¸ªæ¨¡å‹éƒ½åŸºæœ¬æ˜¯æ— æ³•æ”¶æ•›çš„ï¼Œä¸è¿‡è¿™ä¹Ÿæ­£å¸¸ï¼Œä½†æˆ‘è§‰å¾—åº”è¯¥è¿˜æœ‰ä¼˜åŒ–ç©ºé—´ã€‚





## äº”ã€åŒè‰²çƒåº”ç”¨ç¨‹åº

ä»ç½‘ç«™ä¸Šçˆ¬å–æœ€è¿‘150æ¬¡çš„ä¸­å¥–ç»“æœï¼Œè¾“å…¥æ¨¡å‹è¿›è¡Œé¢„æµ‹ï¼Œå¾—åˆ°çº¢è“çƒæ•°å­—ã€‚

```python
import requests
import json
import random
import tensorflow as tf
import numpy as np
from datetime import datetime,date
from tensorflow.keras.models import load_model
# åŠ è½½æ¨¡å‹
Rmodel = load_model('model/20231204-174742LSTM2_lr100_batchsize.h5')   #20231204-173622LSTM2_batchsize.h5
Bmodel = load_model('model/20231204-192802B_LSTM2_batchsize.h5')

url = 'https://jc.zhcw.com/port/client_json.php'
headers = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0",
    "Referer": "https://www.zhcw.com/"
}
cookies = {
    "Hm_lvt_692bd5f9c07d3ebd0063062fb0d7622f": "1701622572",
    "_gid": "GA1.2.1218667687.1701622572",
    "Hm_lvt_12e4883fd1649d006e3ae22a39f97330": "1701622573",
    "PHPSESSID": "6k70gq2h44nksmou3n8374jq13",
    "_ga_9FDP3NWFMS": "GS1.1.1701622572.1.1.1701623257.0.0.0",
    "_ga": "GA1.2.1720843243.1701622572",
    "Hm_lpvt_12e4883fd1649d006e3ae22a39f97330": "1701623257",
    "Hm_lpvt_692bd5f9c07d3ebd0063062fb0d7622f": "1701623258"
}

history = []
for i in range(1,6):
    params = {
            'callback':'jQuery112208474410773064831_1701622567918',
            'transactionType':10001001,
            'lotteryId':1,
            'issueCount':150,
            'startIssue':'',
            'endIssue':'',
            'startDate':'',
            'endDate':'',
            'type':0,
            'pageNum':i,'pageSize':30,
            "tt": random.random(),
            "_": str(int(time.time() * 1000))
        }
    # å‘é€HTTP GETè¯·æ±‚
    response = requests.get(url,headers=headers,cookies=cookies,params=params)

    # æå–JSONPå“åº”ä¸­çš„JSONæ•°æ®
    json_data = response.text.split('(')[1].split(')')[0]
    # è§£æJSONæ•°æ®
    data = json.loads(json_data)
    # æå–åŒè‰²çƒå·ç ä¿¡æ¯
    for entry in data['data']:
        issue = int(entry['issue'])
        front_winning_num = entry['frontWinningNum']
        back_winning_num = entry['backWinningNum']
        history.append([issue,front_winning_num,back_winning_num])
# æŒ‰ç…§æœŸå·è¿›è¡Œæ’åº
history = sorted(history, key=lambda x: x[0])
#print(history)        

red_history = []
blue_history = []
# æ„é€ æ¨¡å‹çš„è¾“å…¥æ•°æ®
for h in history:
        red = np.array([int(i)-1 for i in h[1].split(' ')])
        # ç¼–ç 
        red = tf.one_hot(red, depth=33)
        red = tf.reduce_sum(red, axis=0)
        red_history.append(red)
        blue = np.array([int(h[2])-1])
        blue = tf.one_hot(blue, depth=16)
        blue = tf.reduce_sum(blue, axis=0)
        blue_history.append(blue)        
#print(blue_balls)       



# # åŠ è½½æ–°çš„æ•°æ®è¿›è¡Œæ¨ç†
R = tf.expand_dims(tf.stack(red_history), axis=0)
B = tf.expand_dims(tf.stack(blue_history), axis=0)


# å¯¹æ–°æ•°æ®è¿›è¡Œé¢„æµ‹
Rpredictions = Rmodel.predict(R,verbose=0)
Bpredictions = Bmodel.predict(B,verbose=0)
# # æ‰“å°é¢„æµ‹ç»“æœ
#print(Rpredictions)
# print(Bpredictions)

# # é€‰æ‹©å‡ºæœ€å¤§çš„5ä¸ªå…ƒç´ åŠå…¶ç´¢å¼•
_, Rindices = tf.math.top_k(tf.constant(Rpredictions[0]), k=6)
_, Bindices = tf.math.top_k(tf.constant(Bpredictions[0]), k=5)
print('ä»Šå¤©æ˜¯:', date.today(),'  æ¨ç†ä¸‹ä¸€æ¬¡åŒè‰²çƒçš„å·ç æ˜¯ï¼š')
print(f'1ï¼šçº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[0]+1).numpy()}')
print(f'2ï¼šçº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[1]+1).numpy()}')
print(f'3ï¼šçº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[2]+1).numpy()}')
print(f'4ï¼šçº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[3]+1).numpy()}')
print(f'5ï¼šçº¢çƒç¼–å·{(Rindices+1).numpy()},è“çƒç¼–å·ä¸º{(Bindices[4]+1).numpy()}')
```
ç»“æœå¦‚ä¸‹ï¼š
```
ä»Šå¤©æ˜¯: 2023-12-04   æ¨ç†ä¸‹ä¸€æ¬¡åŒè‰²çƒçš„å·ç æ˜¯ï¼š
1ï¼šçº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º1
2ï¼šçº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º10
3ï¼šçº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º12
4ï¼šçº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º7
5ï¼šçº¢çƒç¼–å·[14 16 29 20 11 33],è“çƒç¼–å·ä¸º13
```

